<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Парадокс Бертрана</title>
	<script type="text/javascript">
		function link1(id)
		{
			for (var i = 1; i <= 3; i++)
			{
				if (id == i)
				{
					document.getElementById(i).className = 'active';
				}
				else
				{
					document.getElementById(i).className = 'nan';
				}
			}
		}

		function link2(id)
		{
			for (var i = 11; i <= 13; i++)
			{
				if (id == i)
				{
					document.getElementById(i).className = 'active';
				}
				else
				{
					document.getElementById(i).className = 'nan';
				}
			}
		}
		
		function linkMenu(id)
		{
			for (var i = 5; i <= 6; i++)
			{
				if (id == i)
				{
					document.getElementById(i).className = 'active';
				}
				else
				{
					document.getElementById(i).className = 'nan';
				}
			}
		}
				function preDraw() 
		{
			var canvas1 = document.getElementById("canvas1");
			var ctx = canvas1.getContext("2d");
			ctx.translate(200, 200);
			clrcan();
			canvas1.addEventListener("click", onclick, false);
			canvas1.addEventListener("mouseover", onhover1, false);
			canvas1.addEventListener("mouseout", onout1, false);
		}
		function onout1()
		{
			document.getElementById("canvas1").className = 'nan';
		}
		function onhover1()
		{
			document.getElementById("canvas1").className = 'canvasa1';
		}

function onclick(){
        clrcan();
		draw1(choise, met1);
}

		function clrcan()
		{
			var ctx = canvas1.getContext("2d");
			ctx.beginPath();
			ctx.fillStyle = "rgb(255, 255, 255)";
			ctx.fillRect(-200, -200, 400, 400);
			ctx.strokeStyle = "rgb(100, 100, 100)";
			startRound();
		}
		function startRound()
		{
			var ctx = canvas1.getContext("2d");
			ctx.beginPath();
			ctx.strokeStyle = "rgb(0, 0, 0)";
			ctx.lineWidth = 0.5;
			var r = 200;
			ctx.arc(0, 0, r, 0, Math.PI*2, true);
			ctx.stroke();
			ctx.moveTo(3, 0);
			ctx.lineWidth = 0.2;
			ctx.arc(0, 0, 2, 0, Math.PI*2, true);
			ctx.stroke();
			ctx.strokeStyle = "rgb(100, 100, 100)";
			ctx.lineWidth = 0.5;
		}
		function draw1(caseDraw, method) 
		{
			if (caseDraw == 1)
			{
				drawPix1(method);
			}
			else
			{
				drawHor1(method);
			}
		}
		function drawHor1(method) 
		{
			var ctx = canvas1.getContext("2d");
			var n = 0, m = 0;
			var r = 200;
			ctx.lineWidth = 0.5;
			ctx.beginPath();
			while (n < nmax)
			{
				switch (method) {
					case 1:
						x = Math.floor(Math.random()*2*r)-r;
						y = Math.floor(Math.random()*2*r)-r;
					break
					case 2:
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x = Math.floor(Math.sin(ran*Math.PI)*ran1*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y = Math.floor(Math.cos(ran*Math.PI)*ran1*r*znak);
					break
					case 3:
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x = Math.floor(Math.sin(ran*Math.PI)*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y = Math.floor(Math.cos(ran*Math.PI)*r*znak);
						
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x1 = Math.floor(Math.sin(ran*Math.PI)*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y1 = Math.floor(Math.cos(ran*Math.PI)*r*znak);
						diag=Math.sqrt((x-r)*(x-r)+(y-r)*(y-r));
						
						x = Math.floor((x+x1)/2);
						y = Math.floor((y+y1)/2);
					break
				}
				diag=Math.sqrt(x*x+y*y);
				if (diag < r/2) m++;
				if (diag < r)
				{
					n++;
					k = Math.sqrt(r*r - diag*diag)/diag;
					ctx.moveTo(x+y*k, y-x*k);
					ctx.lineTo(x-y*k, y+x*k);
				}
			}
			ctx.stroke();
			var mye = document.getElementById("m1");
			mye.innerHTML = m;
			var myep = document.getElementById("p1");
			myep.innerHTML = m/n;
		}
		function drawPix1(method) 
		{
			var ctx1 = canvas1.getContext("2d");
			var n = 0, m = 0;
			var r = 200;
			ctx1.fillStyle = "rgb(50, 50, 50)";
			while (n < nmax)
			{
				switch (method) {
					case 1:
						x = Math.floor(Math.random()*2*r)-r;
						y = Math.floor(Math.random()*2*r)-r;
					break
					case 2:
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x = Math.floor(Math.sin(ran*Math.PI)*ran1*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y = Math.floor(Math.cos(ran*Math.PI)*ran1*r*znak);
					break
					case 3:
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x = Math.floor(Math.sin(ran*Math.PI)*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y = Math.floor(Math.cos(ran*Math.PI)*r*znak);
						
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x1 = Math.floor(Math.sin(ran*Math.PI)*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y1 = Math.floor(Math.cos(ran*Math.PI)*r*znak);
						diag=Math.sqrt((x-r)*(x-r)+(y-r)*(y-r));
						
						x = Math.floor((x+x1)/2);
						y = Math.floor((y+y1)/2);
					break
					}
				diag=Math.sqrt(x*x+y*y);
				if (diag < r/2) m++;
				if (diag < r)
				{
					n++;
					ctx1.fillRect(x, y, 1, 1);
				}
			}
			var mye = document.getElementById("m1");
			mye.innerHTML = m;
			var myep = document.getElementById("p1");
			myep.innerHTML = m/n;
		}
				function preDraw2()
		{
			var canvas2 = document.getElementById("canvas2");
			var ctx2 = canvas2.getContext("2d");
			ctx2.translate(200, 200);
			clrcan2();
			canvas2.addEventListener("click", onclick2, false);
			canvas2.addEventListener("mouseover", onhover2, false);
			canvas2.addEventListener("mouseout", onout2, false);
		}
		function onout2()
		{
			document.getElementById("canvas2").className = 'nan';
		}
		function onhover2()
		{
			document.getElementById("canvas2").className = 'canvasa';
		}
		function onclick2()
		{
			clrcan2();
			draw2(choise, met2);
		}
		
		function clrcan2()
		{
			var ctx2 = canvas2.getContext("2d");
			ctx2.beginPath();
			ctx2.fillStyle = "rgb(255, 255, 255)";
			ctx2.fillRect(-200, -200, 400, 400);
			ctx2.fillStyle = "rgb(100, 100, 100)";
			startRound2();
		}
		function startRound2()
		{
			var ctx2 = canvas2.getContext("2d");
			ctx2.beginPath();
			ctx2.strokeStyle = "rgb(0, 0, 0)";
			ctx2.lineWidth = 0.5;
			var r = 200;
			ctx2.arc(0, 0, r, 0, Math.PI*2, true);
			ctx2.stroke();
			ctx2.moveTo(3, 0);
			ctx2.lineWidth = 0.2;
			ctx2.arc(0, 0, 2, 0, Math.PI*2, true);
			ctx2.stroke();
			ctx2.strokeStyle = "rgb(100, 100, 100)";
			ctx2.lineWidth = 0.5;
		}
		function draw2(caseDraw, method) 
		{
			if (caseDraw == 1)
			{
				drawPix2(method);
			}
			else
			{
				drawHor2(method);
			}
		}
		function drawHor2(method) 
		{
			var ctx2 = canvas2.getContext("2d");
			var n = 0, m = 0;
			var r = 200;
			ctx2.lineWidth = 0.5;
			ctx2.beginPath();
			while (n < nmax)
			{
				switch (method) {
					case 1:
						x = Math.floor(Math.random()*2*r)-r;
						y = Math.floor(Math.random()*2*r)-r;
					break
					case 2:
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x = Math.floor(Math.sin(ran*Math.PI)*ran1*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y = Math.floor(Math.cos(ran*Math.PI)*ran1*r*znak);
					break
					case 3:
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x = Math.floor(Math.sin(ran*Math.PI)*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y = Math.floor(Math.cos(ran*Math.PI)*r*znak);
						
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x1 = Math.floor(Math.sin(ran*Math.PI)*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y1 = Math.floor(Math.cos(ran*Math.PI)*r*znak);
						diag=Math.sqrt((x-r)*(x-r)+(y-r)*(y-r));
						
						x = Math.floor((x+x1)/2);
						y = Math.floor((y+y1)/2);
					break
				}
				diag=Math.sqrt(x*x+y*y);
				if (diag < r/2) m++;
				if (diag < r)
				{
					n++;
					k = Math.sqrt(r*r - diag*diag)/diag;
					ctx2.moveTo(x+y*k, y-x*k);
					ctx2.lineTo(x-y*k, y+x*k);
				}
			}
			ctx2.stroke();
			var mye = document.getElementById("m2");
			mye.innerHTML = m;
			var myep = document.getElementById("p2");
			myep.innerHTML = m/n;
		}
		function drawPix2(method) 
		{
			var ctx2 = canvas2.getContext("2d");
			var n = 0, m = 0;
			var r = 200;
			ctx2.fillStyle = "rgb(50, 50, 50)";
			while (n < nmax)
			{
				switch (method) {
					case 1:
						x = Math.floor(Math.random()*2*r)-r;
						y = Math.floor(Math.random()*2*r)-r;
					break
					case 2:
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x = Math.floor(Math.sin(ran*Math.PI)*ran1*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y = Math.floor(Math.cos(ran*Math.PI)*ran1*r*znak);
					break
					case 3:
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x = Math.floor(Math.sin(ran*Math.PI)*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y = Math.floor(Math.cos(ran*Math.PI)*r*znak);
						
						ran = Math.random();
						ran1 = Math.random();
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						x1 = Math.floor(Math.sin(ran*Math.PI)*r*znak);
						
						znak = -1-(Math.floor(Math.random()*2)-1)*2;
						y1 = Math.floor(Math.cos(ran*Math.PI)*r*znak);
						diag=Math.sqrt((x-r)*(x-r)+(y-r)*(y-r));
						
						x = Math.floor((x+x1)/2);
						y = Math.floor((y+y1)/2);
					break
				}
				diag=Math.sqrt(x*x+y*y);
				if (diag < r/2) m++;
				if (diag < r)
				{
					n++;
					ctx2.fillRect(x, y, 1, 1);
				}
			}
			var mye = document.getElementById("m2");
			mye.innerHTML = m;
			var myep = document.getElementById("p2");
			myep.innerHTML = m/n;
		}
	</script>
	<script type="text/javascript" src="code1.js"></script>
	<script type="text/javascript" src="code2.js"></script>
	<style>
		body
		{
			margin: 0px;
			min-width: 1300px;
			font-family: monospace;
		}
		a
		{
			color: #0000bb;
			border-bottom: 1px dashed #0000bb;
			text-decoration: none;
		}

		.active
		{
			color: #00ccbb;
			font-weight:bold;
		}
		.nan
		{
		}
		names
		{
			font-weight:bold;
		}
		/*---------------------------------------------------------*/
		#menu
		{
			height: 70px;
			text-align: center;
		}
		/*---------------------------------------------------------*/
		td
		{
			margin: 0;
			padding: 0;
		}
		#rounds
		{
			width: 832px;
			-moz-user-select: -moz-none;
			-o-user-select:none;
			-khtml-user-select: none;
			-webkit-user-select: none;
			user-select: none;
		}
		.canvasa
		{
			margin: -1px;
			border: 1px dotted #CCC;
		}
		.canvasa1
		{
			margin: -1px;
			margin-right: 19px !important;
			border: 1px dotted #CCC;
		}
		#canvas1
		{
			margin-right: 20px;
			/*border-left: 1px solid #CCC;*/
		}
		#canvas2
		{
			/*border-right: 1px solid #CCC;*/
		}
		/*---------------------------------------------------------*/
		#leftMenu
		{
			vertical-align: top;
			text-align: right;
			padding-right: 20px;
		}
		#rightMenu
		{
			vertical-align: top;
			text-align: left;
			padding-left: 20px;
			-moz-user-select: -moz-none;
			-o-user-select:none;
			-khtml-user-select: none;
			-webkit-user-select: none;
			user-select: none;
		}
		/*---------------------------------------------------------*/
		#nTop
		{
			height: 18px;
		}

		#n
		{
			padding-left: 320px;
			height: 20px;
		}
		#n input
		{
			width: 120px;
		}
		#m
		{
			height: 20px;
		}
		#p
		{
			height: 20px;
		}
		.dz
		{
			padding-left: 170px;
			width: 243px;
			float: left;
		}
	</style>
</head>
<body onload="preDraw();preDraw2();choise=1;nmax=1000">
	<table width="100%" border="0" cellspacing="0">
		<tr>
			<td id="menu" colspan="3">
			<a href="#" onclick="linkMenu(id); choise=1;clrcan();draw1(choise,met1);clrcan2();draw2(choise,met2);" id="5" class="active">Точки</a>
			|
			<a href="#" onclick="linkMenu(id); choise=2;clrcan();draw1(choise,met1);clrcan2();draw2(choise,met2);" id="6" class="nan">Хорды</a>
			</td>
		</tr>
		<tr>
			<td id="leftMenu">
				<a href="#" onclick="link1(id);clrcan();met1=1;draw1(choise, met1);" id="1" class="nan" onclick="kodimg(id)">Бросать точки</a><br><br>
				<a href="#" id="2" class="nan" onclick="link1(id);clrcan();met1=2;draw1(choise, met1);">Бросать хорды</a><br><br>
				<a href="#" id="3" class="nan" onclick="link1(id);clrcan();met1=3;draw1(choise, met1);">Треугольником</a>
			</td>
			<td id="rounds">
				<canvas id="canvas1" width="400" height="400">Браузер не поддерживает canvas!</canvas>
				<canvas class="nan" id="canvas2" width="400" height="400">Браузер не поддерживает canvas!</canvas>
			</td>
			<td id="rightMenu">
				<a href="#" onclick="link2(id);clrcan2();met2=1;draw2(choise, met2);" id="11" class="nan">Бросать точки</a><br><br>
				<a href="#" id="12" class="nan" onclick="link2(id);clrcan2();met2=2;draw2(choise,met2);">Бросать хорды</a><br><br>
				<a href="#" id="13" class="nan" onclick="link2(id);clrcan2();met2=3;draw2(choise,met2);">Треугольником</a>
			</td>
		</tr>
		<tr>
			<td id="nTop" colspan="3"></td>
		</tr>
		<tr>
			<td class="nBox">
			</td>
			<td id="n" class="nBox">
				<names>N</names> = <input id="postcode" onchange="var I = document.getElementById('postcode');nmax=I.value;" name="postcode" type="number" min="1" max="1000000" value="1000" maxlength="7">
			</td>
			<td class="nBox">
			</td>
		</tr>
		<tr>
			<td class="nBox">
			</td>
			<td id="m" class="nBox">
				<div class="dz">
					<names>m</names> &nbsp&nbsp&nbsp= <span id="m1">0</span>
				</div>
				<div class="dz">
					<names>m</names> &nbsp&nbsp&nbsp= <span id="m2">0</span>
				<div>
			</td>
			<td class="nBox">
			</td>
		</tr>
		<tr>
			<td class="nBox">
			</td>
			<td id="p" class="nBox">
				<div class="dz">
					<names>P(A)</names> = <span id="p1">0</span>
				</div>
				<div class="dz">
					<names>P(A)</names> = <span id="p2">0</span>
				</div>
			</td>
			<td class="nBox">
			</td>
		</tr>
	</table>
</body>
</html>